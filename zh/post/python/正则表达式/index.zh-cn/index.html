<!DOCTYPE html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>正则表达式的使用 | 我的 Hugo 网站</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="正则的常用语法">
    <meta name="generator" content="Hugo 0.129.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/zh/post/python/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.zh-cn/">
    

    <meta property="og:url" content="http://localhost:1313/zh/post/python/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.zh-cn/">
  <meta property="og:site_name" content="我的 Hugo 网站">
  <meta property="og:title" content="正则表达式的使用">
  <meta property="og:description" content="正则的常用语法">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2022-08-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-08-20T00:00:00+00:00">
    <meta property="article:tag" content="Regex">
    <meta property="article:tag" content="Re">

  <meta itemprop="name" content="正则表达式的使用">
  <meta itemprop="description" content="正则的常用语法">
  <meta itemprop="datePublished" content="2022-08-20T00:00:00+00:00">
  <meta itemprop="dateModified" content="2022-08-20T00:00:00+00:00">
  <meta itemprop="wordCount" content="510">
  <meta itemprop="keywords" content="Regex,Re">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="正则表达式的使用">
  <meta name="twitter:description" content="正则的常用语法">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/zh/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        我的 Hugo 网站
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/" title="主页 页">
              主页
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/search/" title="搜索 页">
              搜索
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/ideas/" title="想法 页">
              想法
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/zh/post/" title="Posts 页">
              Posts
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
    
    <a href="https://twitter.com/GoHugoIO" target="_blank" rel="noopener" class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
      
      <a href="https://twitter.com/intent/tweet?url=http://localhost:1313/zh/post/python/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.zh-cn/&amp;text=%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e4%bd%bf%e7%94%a8" class="ananke-social-link twitter no-underline" aria-label="share on Twitter">
        
        <span class="icon"> <svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
        
      </a>
    
  </div>


      <h1 class="f1 athelas mt3 mb1">正则表达式的使用</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-08-20T00:00:00Z">八月 20, 2022</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>正则表达式，如果是匹配多次，第一次匹配到了，第二次匹配的时候是从剩下的字符从新开始匹配。</p>
<h4 id="通配符">通配符</h4>
<p>通配符 <strong>.</strong> 可以匹配任何除换行符以外的字符，有且只能匹配一个字符，不能多也不能少。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;.&#34;</span>, <span style="color:#e6db74">&#34;a,b,c,d,e&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;a&#39;, &#39;,&#39;, &#39;b&#39;, &#39;,&#39;, &#39;c&#39;, &#39;,&#39;, &#39;d&#39;, &#39;,&#39;, &#39;e&#39;]</span>
</span></span></code></pre></div><p>全部都匹配到了，返回结果是一个数组</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;a.b&#34;</span>, <span style="color:#e6db74">&#34;a,b,c,d,e,ab,abb,a</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">b,a</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">b&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;a,b&#39;, &#39;abb&#39;, &#39;a\tb&#39;]</span>
</span></span></code></pre></div><p>匹配到了三个结果</p>
<h4 id="字符集">字符集</h4>
<p>字符集<code>[]</code>多选一的意思，表示匹配<code>[]</code>里面的其中一个，也是有且只能匹配一个字符，不能多，也不能少。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;[ace]&#34;</span>, <span style="color:#e6db74">&#34;a,b,c,d,e&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;a&#39;, &#39;c&#39;, &#39;e&#39;]</span>
</span></span></code></pre></div><p>匹配到了三个结果。第一次从字符集里面取出a匹配一遍，看有哪些是符号条件的，第二次从字符集里面取出c匹配，等所以字符集里面的字符都匹配一遍，把结果合并。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;a[bce]f&#34;</span>, <span style="color:#e6db74">&#34;af,abf,abbf,acef,aef,abf&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;abf&#39;, &#39;aef&#39;, &#39;abf&#39;]</span>
</span></span></code></pre></div><p>匹配到了三个结果，第一次用abf匹配，找到所有结果。第二次匹配的字符串是截取后的，类似于split函数把字符串通过abf分段，然后再用acf去匹配每一段。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;[0123456789]&#34;</span>, <span style="color:#e6db74">&#34;a,b,2,d,c,8,B,C,F&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;2&#39;, &#39;8&#39;]</span>
</span></span></code></pre></div><p>匹配所有的数字，要注意字符集<code>[]</code>每次只能取一个字符用来匹配。<code>[0123456789]</code>写起来有些麻烦，可以用<code>[0-9]</code>简写，还可以用 <code>\d</code>简写表示，都表示一个意思，匹配所有的数字。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;[0-9a-zA-Z]&#34;</span>, <span style="color:#e6db74">&#34;a,b,2,d,c,8,B,C,F&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;a&#39;, &#39;b&#39;, &#39;2&#39;, &#39;d&#39;, &#39;c&#39;, &#39;8&#39;, &#39;B&#39;, &#39;C&#39;, &#39;F&#39;]</span>
</span></span></code></pre></div><p>匹配所有的数字和大小写字母，<code>[0-9a-zA-Z]</code>一般也可以简写成<code>\w</code> ，<code>\w</code>表示匹配所有的大小写字母和数字和下划线<code>_</code>。</p>
<h4 id="重复元字符">重复元字符</h4>
<p>重复相关的元字符 <code>*</code>,<code>+</code>,<code>?</code>,<code>{}</code>是用来修饰字符集或者通配符的，默认都是贪婪匹配的，贪婪匹配每次匹配会匹配最多的符合条件的字符。</p>
<ol>
<li>
<p><code>+</code>表示重复1-多次，结果最少要匹配成功1次</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;\d+&#34;</span>, <span style="color:#e6db74">&#34;a,b,23355,d,6,88888888&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;23355&#39;, &#39;6&#39;, &#39;88888888&#39;]</span>
</span></span></code></pre></div><p>如果要取消贪婪匹配，可以在重复元字符后面加 <code>?</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;\d+?&#34;</span>, <span style="color:#e6db74">&#34;a,b,23355,d,6,88888888&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;2&#39;, &#39;3&#39;, &#39;3&#39;, &#39;5&#39;, &#39;5&#39;, &#39;6&#39;, &#39;8&#39;, &#39;8&#39;, &#39;8&#39;, &#39;8&#39;, &#39;8&#39;, &#39;8&#39;, &#39;8&#39;, &#39;8&#39;]</span>
</span></span></code></pre></div></li>
<li>
<p><code>*</code>表示重复0-多次，最少匹配成功0次，可以匹配不成功，也就是匹配的结果可以为空。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;\d*&#34;</span>, <span style="color:#e6db74">&#34;a,b,23355,d,6,88888888&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;23355&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;6&#39;, &#39;&#39;, &#39;88888888&#39;, &#39;&#39;]</span>
</span></span></code></pre></div><p>可以看到结果有空的字符串。可以这么理解，当匹配字符串下标为0的a时，没匹配上，但是因为<code>*</code>是可以匹配0次到多次，所以这次匹配会返回一个&quot;&ldquo;空的字符，然后下标右移一位，继续下一次的匹配。</p>
</li>
<li>
<p><code>{n}</code>表示匹配固定的n个字符长度。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;\w</span><span style="color:#e6db74">{6}</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;apple,bananaq,orange,melon&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;banana&#39;, &#39;orange&#39;]</span>
</span></span></code></pre></div><p>匹配六个字符长度的字符串，字符串是由字母，数字或下划线组成。也可以<code>{m,n}</code>表示匹配m到n次，<code>{m,}</code>表示至少匹配m次</p>
</li>
<li>
<p><code>?</code>匹配0次或者1次</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;abc?&#34;</span>, <span style="color:#e6db74">&#34;abc,abcc,abe,ab&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;abc&#39;, &#39;abc&#39;, &#39;ab&#39;, &#39;ab&#39;]</span>
</span></span></code></pre></div><p>注意重复元字符<code>?</code>修饰的是字符<code>c</code>。如果要取消贪婪匹配，可以在<code>?</code>后面再加一个<code>?</code>,也就是<code>abc??</code>。</p>
<p><code>?</code>的两种用法要区分开来，如果是在重复元字符后面出现，表示取消贪婪 比如 <code>*?</code> <code> +?</code> <code> ??</code> 其他地方表示重复0或者1次。</p>
</li>
</ol>
<h4 id="位置元字符">位置元字符</h4>
<p>位置元字符有两个 <code>^</code>和<code>$</code>用来限制字符的位置。</p>
<ol>
<li>
<p><code>^</code>表示起始位置，必须从起始下标0开始匹配。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;^\d+&#34;</span>, <span style="color:#e6db74">&#34;32,banana,255,orange,454456&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;32&#39;]</span>
</span></span></code></pre></div><p>表示匹配字符串开头的连续数字。如果不是以数字开头就匹配不到</p>
<p><code>^</code>还有一种用法，用在字符集<code>[]</code>里面，表示非</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;[^0-9]&#34;</span>, <span style="color:#e6db74">&#34;a,b,2,d,c,8,B,C,F&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;a&#39;, &#39;,&#39;, &#39;b&#39;, &#39;,&#39;, &#39;,&#39;, &#39;d&#39;, &#39;,&#39;, &#39;c&#39;, &#39;,&#39;, &#39;,&#39;, &#39;B&#39;, &#39;,&#39;, &#39;C&#39;, &#39;,&#39;, &#39;F&#39;]</span>
</span></span></code></pre></div><p>表示匹配所有非数字。</p>
</li>
<li>
<p><code>$</code>表示结束位置，从字符串最后面开始匹配。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;\d+$&#34;</span>, <span style="color:#e6db74">&#34;32,banana,255,orange,454456&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;454456&#39;]</span>
</span></span></code></pre></div><p>表示匹配以数字结尾的字符 ，如果不是以数字结尾就匹配不到。</p>
</li>
</ol>
<h4 id="其他元字符">其他元字符</h4>
<ol>
<li>
<p><code>()</code>模式捕获，具有提取指定数据的能力。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;,(\w</span><span style="color:#e6db74">{5}</span><span style="color:#e6db74">),&#34;</span>, <span style="color:#e6db74">&#34;,apple,banana,peach,orange,melon,&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;apple&#39;, &#39;peach&#39;, &#39;melon&#39;]</span>
</span></span></code></pre></div><p>对取到的值进行过滤，只取<code>()</code>里面的值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;,\w</span><span style="color:#e6db74">{5}</span><span style="color:#e6db74">,&#34;</span>, <span style="color:#e6db74">&#34;,apple,banana,peach,orange,melon,&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;,apple,&#39;, &#39;,peach,&#39;, &#39;,melon,&#39;]</span>
</span></span></code></pre></div><p>对比下 不加<code>()</code>的结果,其的头尾都是有<code>,</code>逗号的。如果需要取消模式捕获，可以在左括号的后面加上<code>?:</code>,比如 <code>(?:\w{5})</code>。</p>
</li>
<li>
<p><code>|</code>表示或的效果</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;\w+@(?:163|qq).com&#34;</span>, <span style="color:#e6db74">&#34;123dn@163.com,.....3n4n5@qq.com......nene.3nn56@gmail.com....enen&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;123dn@163.com&#39;, &#39;3n4n5@qq.com&#39;]</span>
</span></span></code></pre></div><p>表示匹配所有的qq邮箱和163邮箱。<code>|</code>一般是跟<code>(?:)</code>一起使用。</p>
</li>
<li>
<p>正向先行断言</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;\d+(?=PM)&#34;</span>, <span style="color:#e6db74">&#34;Date: 4 Aug 3PM 6&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;3&#39;]</span>
</span></span></code></pre></div><p>表示 只匹配数字后面是PM的数字  格式<code>(?=PM)</code></p>
</li>
<li>
<p>负向先行断言</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;\d+(?!PM)&#34;</span>, <span style="color:#e6db74">&#34;Date: 4 Aug 3PM 6&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;4&#39;, &#39;6&#39;]</span>
</span></span></code></pre></div><p>只匹配数字后面不是PM的数字 格式<code>(?!PM)</code></p>
</li>
<li>
<p>正向后行断言</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;(?&lt;=\$)\d+&#34;</span>,<span style="color:#e6db74">&#34;Product Code: 1064 Price: $5 ¥67&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;5&#39;]</span>
</span></span></code></pre></div><p>匹配数字，数字需满足前面有$的数字 格式 <code>(?&lt;=\$)</code> 注意，如果是特殊符号记得加<code>\</code>，取消其特殊含义，<code>$</code>,<code>¥</code>等都需要加<code>\</code>。</p>
</li>
<li>
<p>负向后行断言</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;(?&lt;!\$)\d+&#34;</span>, <span style="color:#e6db74">&#34;Product Code: 1064 Price: $5&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;1064&#39;]</span>
</span></span></code></pre></div><p>匹配数字，数字需满足前面不是 <code>$</code>的数字。</p>
</li>
</ol>
<h4 id="转义符号">转义符号</h4>
<p>转义符号 <code>\</code>有两种用法</p>
<ol>
<li>
<p>将一些普通符号赋予特殊功能。</p>
<ol>
<li><code>\d</code>表示<code>[0-9]</code></li>
<li><code>\D</code>表示 <code>[^0-9]</code></li>
<li><code>\w</code>表示 <code>[0-9a-zA-Z_]</code></li>
<li><code>\W</code>表示 <code>[^0-9a-zA-Z_]</code></li>
<li><code>\s</code>表示 仅匹配空白字符</li>
<li><code>\S</code>表示 匹配除空白外的字符</li>
</ol>
</li>
<li>
<p>将特殊符号(元字符)取消其特殊功能 <code>\*</code>   <code>\.</code>  <code>\+</code>  <code>\?</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;\*&#34;</span>, <span style="color:#e6db74">&#34;*** ??? ___&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;*&#39;, &#39;*&#39;, &#39;*&#39;]</span>
</span></span></code></pre></div><p>匹配<code>*</code>号</p>
</li>
</ol>
<h4 id="典型例子">典型例子</h4>
<ol>
<li>
<p>例子1</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;12&gt; &lt;xzy&gt; &lt;!@#$%&gt; &lt;1a!#e2&gt; &lt;&gt;&#34;</span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;&lt;.+&gt;&#34;</span>, text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;&lt;12&gt; &lt;xzy&gt; &lt;!@#$%&gt; &lt;1a!#e2&gt; &lt;&gt;&#39;]</span>
</span></span></code></pre></div><p>注意结果只有一个，返回的是一整个字符串。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;12&gt; &lt;xzy&gt; &lt;!@#$%&gt; &lt;1a!#e2&gt; &lt;&gt;&#34;</span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;&lt;.+?&gt;&#34;</span>, text)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;&lt;12&gt;&#39;, &#39;&lt;xzy&gt;&#39;, &#39;&lt;!@#$%&gt;&#39;, &#39;&lt;1a!#e2&gt;&#39;]</span>
</span></span></code></pre></div><p>匹配到了四个结果，跟上面的例子比，加了个<code>?</code>，表示取消贪婪匹配。</p>
</li>
<li>
<p>例子2</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2&gt; &lt;x
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">zy&gt; &lt;!@#$%&gt; &lt;1a
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">!#e2&gt; &lt;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修饰模式 默认是re.I 意思是 .可以匹配换行符外的所有字符</span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;&lt;.*?&gt;&#34;</span>, text, re<span style="color:#f92672">.</span>I)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;&lt;!@#$%&gt;&#39;, &#39;&lt;&gt;&#39;]</span>
</span></span></code></pre></div><p>如果想要换行符 <code>.</code>也可以匹配到，可以设置修饰模式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&lt;1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2&gt; &lt;x
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">zy&gt; &lt;!@#$%&gt; &lt;1a
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">!#e2&gt; &lt;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修饰模式 re.S 意思是 .可以匹配所有字符，包括换行符</span>
</span></span><span style="display:flex;"><span>ret <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;&lt;.*?&gt;&#34;</span>, text, re<span style="color:#f92672">.</span>S)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 结果</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [&#39;&lt;1\n2&gt;&#39;, &#39;&lt;x\nzy&gt;&#39;, &#39;&lt;!@#$%&gt;&#39;, &#39;&lt;1a\n!#e2&gt;&#39;, &#39;&lt;&gt;&#39;]</span>
</span></span></code></pre></div><p>匹配到了五个结果，这个模式在爬虫里面比较用的到。</p>
</li>
</ol>
<ul class="pa0">
  
   <li class="list di">
     <a href="/zh/tags/regex/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Regex</a>
   </li>
  
   <li class="list di">
     <a href="/zh/tags/re/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Re</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/zh/" >
    &copy;  我的 Hugo 网站 2024 
  </a>
    <div>
<div class="ananke-socials">
  
    
    <a href="https://twitter.com/GoHugoIO" target="_blank" rel="noopener" class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
